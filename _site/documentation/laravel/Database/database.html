<!DOCTYPE html>
<html lang="">
<!-- head -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>پایگاه داده ها | مجموعه مقالات و مطالب آموزشی وب - گرداوری توسط فرهاد میرزاپور</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="پایگاه داده ها" />
<meta name="author" content="Farhad Mirzapour" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="لاراول ارتباط با پایگاه داده ها را با استفاده از raw SQL, the fluent query builder و the Eloquent ORM بسیار ساده ساخته است. در حال حاضر، Laravel از چهار پایگاه داده پشتیبانی می کند: MySQL PostgreSQL SQLite SQL Server تنظیمات (Configuration) پیکربندی پایگاه داده برای برنامه شما در config/database.php قرار دارد. در این فایل شما می توانید تمام اتصالات پایگاه داده خود را تعریف کنید. تنظیمات Read &amp; Write Connections گاهی اوقات شما ممکن است مایل به استفاده از یک کانکشن پایگاه داده برای دستورات SELECT، و کانکشن دیگر برای INSERT، UPDATE و DELETE statements. لاراول این امکان را ایجاد می کند تا کانکشن های مناسب مورد استفاده قرار می گیرد. &#39;mysql&#39; =&gt; [ &#39;read&#39; =&gt; [ &#39;host&#39; =&gt; &#39;192.168.1.1&#39;, ], &#39;write&#39; =&gt; [ &#39;host&#39; =&gt; &#39;196.168.1.2&#39; ], &#39;sticky&#39; =&gt; true, &#39;driver&#39; =&gt; &#39;mysql&#39;, &#39;database&#39; =&gt; &#39;database&#39;, &#39;username&#39; =&gt; &#39;root&#39;, &#39;password&#39; =&gt; &#39;&#39;, &#39;charset&#39; =&gt; &#39;utf8mb4&#39;, &#39;collation&#39; =&gt; &#39;utf8mb4_unicode_ci&#39;, &#39;prefix&#39; =&gt; &#39;&#39;, ], گزینه sticky یک مقدار اختیاری است تا عملیات خواندن فوری از دیتابیس در زمانیکه عملیات نوشتن اطلاعات در دیتابیس در حال انجام است صورت گیرد و تضمین می کند که هر گونه اطلاعاتی که در طول چرخه درخواست نوشته شده است، بتواند بلافاصله پس از همان درخواست از پایگاه داده خوانده شود. استفاده همزمان از چندین connection در پروژه هنگامی که چندین connection (برای انجام عملیات مختلف) در پروژه خود تعریف شده دارید، می توانید از طریق متد connection در façade DB به هر یک از connection ها دسترسی داشته باشید. name ای که به متد connection ارسال می کنید باید با یکی از connection های لیست شده در فایل تنظیمات config/database.php منطبق باشد: $users = DB::connection(&#39;foo&#39;)-&gt;select(...); همچنین می توانید به نمونه ی شی PDO خالص و زیرساختی دسترسی داشته باشید. برای این منظور کافی است متد getPdo را بر روی نمونه ای ازconnection صدا بزنید: $pdo = DB::connection()-&gt;getPdo(); اجرای Raw SQL Queries هنگامی که اتصال پایگاه داده خود را پیکربندی کرده اید، می توانید با استفاده از فاساد DB کوئری ها را اجرا کنید. &lt;?php namespace App\Http\Controllers; use Illuminate\Support\Facades\DB; use App\Http\Controllers\Controller; class UserController extends Controller { /** * Show a list of all of the application&#39;s users. * * @return Response */ public function index() { $users = DB::select(&#39;select * from users where active = ?&#39;, [1]); return view(&#39;user.index&#39;, [&#39;users&#39; =&gt; $users]); } } اولین آرگومان دستورات SQL و دومین آرگومان مقادیری است که بصورت binding جهت جلوگیری از حملات SQL injection مورد استفاده قرار می گیرد. دستور SELECT آرایه ای از نتایج را بر می گرداند و هر نتیجه شی از کلاس PHP StdClass خواهد بود که به شما امکان می دهد به مقادیر نتایج دسترسی داشته باشید: foreach ($users as $user) { echo $user-&gt;name; } استفاده از Named Bindings بجای استفاده از ؟ برای نشان دادن پارامترهای bindings، می توانید از نامگذاری پارامترها استفاده کنید: $results = DB::select(&#39;select * from users where id = :id&#39;, [&#39;id&#39; =&gt; 1]); اجرای دستور Insert کد زیر نحوه اجرای دستور INSERT را نمایش می دهد : DB::insert(&#39;insert into users (id, name) values (?, ?)&#39;, [1, &#39;Dayle&#39;]); اجرای دستور Update کد زیر نحوه اجرای دستور UPDATE را نمایش می دهد که تعداد رکوردهای تغییر داده شده را بر می گرداند : $affected = DB::update(&#39;update users set votes = 100 where name = ?&#39;, [&#39;John&#39;]); اجرای دستور Delete کد زیر نحوه اجرای دستور DELETE را نمایش می دهد که تعداد رکوردهای حذف شده را بر می گرداند : $deleted = DB::delete(&#39;delete from users&#39;); اجرای سایر دستورات SQL تعدادی از دستورات SQL مقداری را بر نمی گردانند. برای اجرای اینگونه دستورات می توان از متد statement فاساد DB همانند زیر استفاده نمود : DB::statement(&#39;drop table users&#39;); گوش دادن به رخدادهای Query با متد Listen می توانید با بهره گیری از متد listen در façade DB، برای تمامی کوئری ها listener تعریف کنید. متد ذکر شده به شما کمک می کند از کوئری هاlog گرفته و آن ها را عیب یابی کنید. می توانید query listener را در یک service provider ثبت کنید: &lt;?php namespace App\Providers; use Illuminate\Support\Facades\DB; use Illuminate\Support\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Bootstrap any application services. * * @return void */ public function boot() { DB::listen(function ($query) { // $query-&gt;sql // $query-&gt;bindings // $query-&gt;time }); } /** * Register the service provider. * * @return void */ public function register() { // } } بررسی Database Transactions به منظور اجرای مجموعه ای از علملیات طی یک تراکنش بر روی پایگاه داده، Laravel متد transaction را ارائه می دهد. در صورتی که در طول اجرای تابع Closure متد transaction خطا رخ دهد، تراکنش به صورت خودکار به حالت قبلی برگردانده می شود (rollback). و اگر با موفقیت اجرا شد، تراکنش به صورت خودکار تایید ثبت (commit) می گردد. به هنگام استفاده از متد transaction لزومی ندارد نگران بازگرداندن یا تایید ثبت تراکنش به صورت دستی باشید: DB::transaction(function () { DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]); DB::table(&#39;posts&#39;)-&gt;delete(); }); نکته: هرنوع اثتثنائی که از درون Closure تعریف شده در متد transaction رخ بدهد ، باعث RollBack شدن transaction بصورت خودکار میشود . اداره کردن deadlock متد transaction یک آرگومان اختیاری دوم را می پذیرد که تعداد دفعاتی را که یک transaction باید در هنگام وقوع یک بن بست (deadlock) انجام شود، تعیین می کند. هنگامی که این تلاش ها به ثمر نرسید، یک استثنا رخ خواهد داد : DB::transaction(function () { DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]); DB::table(&#39;posts&#39;)-&gt;delete(); }, 5); راه اندازی و اجرای Transactions به صورت دستی اگر می خواهید یک تراکنش را به صورت دستی اجرا کرده و کنترل کامل بر عملیات rollback (بازگشت تراکنش به حالت قبلی) و commit (تایید ثبت تراکنش)، می توانید متد begin Transaction را بر روی DB facade فراخوانی نمایید: DB::beginTransaction(); می توانید تراکنش را به وسیله ی متد rollback به حالت قبلی برگردانید (به عقب برگردانید): DB::rollBack(); در پایان می توانید تراکنش را به وسیله ی متد commit تایید ثبت نمایید: DB::commit(); متدهای مربوط به تراکنش façade DB همچنین در تراکنش های query builder و Eloquent ORM کاربرد دارد (می توان از آن ها برای کنترل تراکنش های query builder و Eloquent استفاده کرد)." />
<meta property="og:description" content="لاراول ارتباط با پایگاه داده ها را با استفاده از raw SQL, the fluent query builder و the Eloquent ORM بسیار ساده ساخته است. در حال حاضر، Laravel از چهار پایگاه داده پشتیبانی می کند: MySQL PostgreSQL SQLite SQL Server تنظیمات (Configuration) پیکربندی پایگاه داده برای برنامه شما در config/database.php قرار دارد. در این فایل شما می توانید تمام اتصالات پایگاه داده خود را تعریف کنید. تنظیمات Read &amp; Write Connections گاهی اوقات شما ممکن است مایل به استفاده از یک کانکشن پایگاه داده برای دستورات SELECT، و کانکشن دیگر برای INSERT، UPDATE و DELETE statements. لاراول این امکان را ایجاد می کند تا کانکشن های مناسب مورد استفاده قرار می گیرد. &#39;mysql&#39; =&gt; [ &#39;read&#39; =&gt; [ &#39;host&#39; =&gt; &#39;192.168.1.1&#39;, ], &#39;write&#39; =&gt; [ &#39;host&#39; =&gt; &#39;196.168.1.2&#39; ], &#39;sticky&#39; =&gt; true, &#39;driver&#39; =&gt; &#39;mysql&#39;, &#39;database&#39; =&gt; &#39;database&#39;, &#39;username&#39; =&gt; &#39;root&#39;, &#39;password&#39; =&gt; &#39;&#39;, &#39;charset&#39; =&gt; &#39;utf8mb4&#39;, &#39;collation&#39; =&gt; &#39;utf8mb4_unicode_ci&#39;, &#39;prefix&#39; =&gt; &#39;&#39;, ], گزینه sticky یک مقدار اختیاری است تا عملیات خواندن فوری از دیتابیس در زمانیکه عملیات نوشتن اطلاعات در دیتابیس در حال انجام است صورت گیرد و تضمین می کند که هر گونه اطلاعاتی که در طول چرخه درخواست نوشته شده است، بتواند بلافاصله پس از همان درخواست از پایگاه داده خوانده شود. استفاده همزمان از چندین connection در پروژه هنگامی که چندین connection (برای انجام عملیات مختلف) در پروژه خود تعریف شده دارید، می توانید از طریق متد connection در façade DB به هر یک از connection ها دسترسی داشته باشید. name ای که به متد connection ارسال می کنید باید با یکی از connection های لیست شده در فایل تنظیمات config/database.php منطبق باشد: $users = DB::connection(&#39;foo&#39;)-&gt;select(...); همچنین می توانید به نمونه ی شی PDO خالص و زیرساختی دسترسی داشته باشید. برای این منظور کافی است متد getPdo را بر روی نمونه ای ازconnection صدا بزنید: $pdo = DB::connection()-&gt;getPdo(); اجرای Raw SQL Queries هنگامی که اتصال پایگاه داده خود را پیکربندی کرده اید، می توانید با استفاده از فاساد DB کوئری ها را اجرا کنید. &lt;?php namespace App\Http\Controllers; use Illuminate\Support\Facades\DB; use App\Http\Controllers\Controller; class UserController extends Controller { /** * Show a list of all of the application&#39;s users. * * @return Response */ public function index() { $users = DB::select(&#39;select * from users where active = ?&#39;, [1]); return view(&#39;user.index&#39;, [&#39;users&#39; =&gt; $users]); } } اولین آرگومان دستورات SQL و دومین آرگومان مقادیری است که بصورت binding جهت جلوگیری از حملات SQL injection مورد استفاده قرار می گیرد. دستور SELECT آرایه ای از نتایج را بر می گرداند و هر نتیجه شی از کلاس PHP StdClass خواهد بود که به شما امکان می دهد به مقادیر نتایج دسترسی داشته باشید: foreach ($users as $user) { echo $user-&gt;name; } استفاده از Named Bindings بجای استفاده از ؟ برای نشان دادن پارامترهای bindings، می توانید از نامگذاری پارامترها استفاده کنید: $results = DB::select(&#39;select * from users where id = :id&#39;, [&#39;id&#39; =&gt; 1]); اجرای دستور Insert کد زیر نحوه اجرای دستور INSERT را نمایش می دهد : DB::insert(&#39;insert into users (id, name) values (?, ?)&#39;, [1, &#39;Dayle&#39;]); اجرای دستور Update کد زیر نحوه اجرای دستور UPDATE را نمایش می دهد که تعداد رکوردهای تغییر داده شده را بر می گرداند : $affected = DB::update(&#39;update users set votes = 100 where name = ?&#39;, [&#39;John&#39;]); اجرای دستور Delete کد زیر نحوه اجرای دستور DELETE را نمایش می دهد که تعداد رکوردهای حذف شده را بر می گرداند : $deleted = DB::delete(&#39;delete from users&#39;); اجرای سایر دستورات SQL تعدادی از دستورات SQL مقداری را بر نمی گردانند. برای اجرای اینگونه دستورات می توان از متد statement فاساد DB همانند زیر استفاده نمود : DB::statement(&#39;drop table users&#39;); گوش دادن به رخدادهای Query با متد Listen می توانید با بهره گیری از متد listen در façade DB، برای تمامی کوئری ها listener تعریف کنید. متد ذکر شده به شما کمک می کند از کوئری هاlog گرفته و آن ها را عیب یابی کنید. می توانید query listener را در یک service provider ثبت کنید: &lt;?php namespace App\Providers; use Illuminate\Support\Facades\DB; use Illuminate\Support\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Bootstrap any application services. * * @return void */ public function boot() { DB::listen(function ($query) { // $query-&gt;sql // $query-&gt;bindings // $query-&gt;time }); } /** * Register the service provider. * * @return void */ public function register() { // } } بررسی Database Transactions به منظور اجرای مجموعه ای از علملیات طی یک تراکنش بر روی پایگاه داده، Laravel متد transaction را ارائه می دهد. در صورتی که در طول اجرای تابع Closure متد transaction خطا رخ دهد، تراکنش به صورت خودکار به حالت قبلی برگردانده می شود (rollback). و اگر با موفقیت اجرا شد، تراکنش به صورت خودکار تایید ثبت (commit) می گردد. به هنگام استفاده از متد transaction لزومی ندارد نگران بازگرداندن یا تایید ثبت تراکنش به صورت دستی باشید: DB::transaction(function () { DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]); DB::table(&#39;posts&#39;)-&gt;delete(); }); نکته: هرنوع اثتثنائی که از درون Closure تعریف شده در متد transaction رخ بدهد ، باعث RollBack شدن transaction بصورت خودکار میشود . اداره کردن deadlock متد transaction یک آرگومان اختیاری دوم را می پذیرد که تعداد دفعاتی را که یک transaction باید در هنگام وقوع یک بن بست (deadlock) انجام شود، تعیین می کند. هنگامی که این تلاش ها به ثمر نرسید، یک استثنا رخ خواهد داد : DB::transaction(function () { DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]); DB::table(&#39;posts&#39;)-&gt;delete(); }, 5); راه اندازی و اجرای Transactions به صورت دستی اگر می خواهید یک تراکنش را به صورت دستی اجرا کرده و کنترل کامل بر عملیات rollback (بازگشت تراکنش به حالت قبلی) و commit (تایید ثبت تراکنش)، می توانید متد begin Transaction را بر روی DB facade فراخوانی نمایید: DB::beginTransaction(); می توانید تراکنش را به وسیله ی متد rollback به حالت قبلی برگردانید (به عقب برگردانید): DB::rollBack(); در پایان می توانید تراکنش را به وسیله ی متد commit تایید ثبت نمایید: DB::commit(); متدهای مربوط به تراکنش façade DB همچنین در تراکنش های query builder و Eloquent ORM کاربرد دارد (می توان از آن ها برای کنترل تراکنش های query builder و Eloquent استفاده کرد)." />
<link rel="canonical" href="http://localhost:4000/documentation/laravel/Database/database" />
<meta property="og:url" content="http://localhost:4000/documentation/laravel/Database/database" />
<meta property="og:site_name" content="مجموعه مقالات و مطالب آموزشی وب - گرداوری توسط فرهاد میرزاپور" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-25T19:23:42+03:30" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="پایگاه داده ها" />
<meta name="twitter:site" content="@farhadmirzapour" />
<meta name="twitter:creator" content="@Farhad Mirzapour" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Farhad Mirzapour"},"dateModified":"2017-12-25T19:23:42+03:30","datePublished":"2017-12-25T19:23:42+03:30","description":"لاراول ارتباط با پایگاه داده ها را با استفاده از raw SQL, the fluent query builder و the Eloquent ORM بسیار ساده ساخته است. در حال حاضر، Laravel از چهار پایگاه داده پشتیبانی می کند: MySQL PostgreSQL SQLite SQL Server تنظیمات (Configuration) پیکربندی پایگاه داده برای برنامه شما در config/database.php قرار دارد. در این فایل شما می توانید تمام اتصالات پایگاه داده خود را تعریف کنید. تنظیمات Read &amp; Write Connections گاهی اوقات شما ممکن است مایل به استفاده از یک کانکشن پایگاه داده برای دستورات SELECT، و کانکشن دیگر برای INSERT، UPDATE و DELETE statements. لاراول این امکان را ایجاد می کند تا کانکشن های مناسب مورد استفاده قرار می گیرد. &#39;mysql&#39; =&gt; [ &#39;read&#39; =&gt; [ &#39;host&#39; =&gt; &#39;192.168.1.1&#39;, ], &#39;write&#39; =&gt; [ &#39;host&#39; =&gt; &#39;196.168.1.2&#39; ], &#39;sticky&#39; =&gt; true, &#39;driver&#39; =&gt; &#39;mysql&#39;, &#39;database&#39; =&gt; &#39;database&#39;, &#39;username&#39; =&gt; &#39;root&#39;, &#39;password&#39; =&gt; &#39;&#39;, &#39;charset&#39; =&gt; &#39;utf8mb4&#39;, &#39;collation&#39; =&gt; &#39;utf8mb4_unicode_ci&#39;, &#39;prefix&#39; =&gt; &#39;&#39;, ], گزینه sticky یک مقدار اختیاری است تا عملیات خواندن فوری از دیتابیس در زمانیکه عملیات نوشتن اطلاعات در دیتابیس در حال انجام است صورت گیرد و تضمین می کند که هر گونه اطلاعاتی که در طول چرخه درخواست نوشته شده است، بتواند بلافاصله پس از همان درخواست از پایگاه داده خوانده شود. استفاده همزمان از چندین connection در پروژه هنگامی که چندین connection (برای انجام عملیات مختلف) در پروژه خود تعریف شده دارید، می توانید از طریق متد connection در façade DB به هر یک از connection ها دسترسی داشته باشید. name ای که به متد connection ارسال می کنید باید با یکی از connection های لیست شده در فایل تنظیمات config/database.php منطبق باشد: $users = DB::connection(&#39;foo&#39;)-&gt;select(...); همچنین می توانید به نمونه ی شی PDO خالص و زیرساختی دسترسی داشته باشید. برای این منظور کافی است متد getPdo را بر روی نمونه ای ازconnection صدا بزنید: $pdo = DB::connection()-&gt;getPdo(); اجرای Raw SQL Queries هنگامی که اتصال پایگاه داده خود را پیکربندی کرده اید، می توانید با استفاده از فاساد DB کوئری ها را اجرا کنید. &lt;?php namespace App\\Http\\Controllers; use Illuminate\\Support\\Facades\\DB; use App\\Http\\Controllers\\Controller; class UserController extends Controller { /** * Show a list of all of the application&#39;s users. * * @return Response */ public function index() { $users = DB::select(&#39;select * from users where active = ?&#39;, [1]); return view(&#39;user.index&#39;, [&#39;users&#39; =&gt; $users]); } } اولین آرگومان دستورات SQL و دومین آرگومان مقادیری است که بصورت binding جهت جلوگیری از حملات SQL injection مورد استفاده قرار می گیرد. دستور SELECT آرایه ای از نتایج را بر می گرداند و هر نتیجه شی از کلاس PHP StdClass خواهد بود که به شما امکان می دهد به مقادیر نتایج دسترسی داشته باشید: foreach ($users as $user) { echo $user-&gt;name; } استفاده از Named Bindings بجای استفاده از ؟ برای نشان دادن پارامترهای bindings، می توانید از نامگذاری پارامترها استفاده کنید: $results = DB::select(&#39;select * from users where id = :id&#39;, [&#39;id&#39; =&gt; 1]); اجرای دستور Insert کد زیر نحوه اجرای دستور INSERT را نمایش می دهد : DB::insert(&#39;insert into users (id, name) values (?, ?)&#39;, [1, &#39;Dayle&#39;]); اجرای دستور Update کد زیر نحوه اجرای دستور UPDATE را نمایش می دهد که تعداد رکوردهای تغییر داده شده را بر می گرداند : $affected = DB::update(&#39;update users set votes = 100 where name = ?&#39;, [&#39;John&#39;]); اجرای دستور Delete کد زیر نحوه اجرای دستور DELETE را نمایش می دهد که تعداد رکوردهای حذف شده را بر می گرداند : $deleted = DB::delete(&#39;delete from users&#39;); اجرای سایر دستورات SQL تعدادی از دستورات SQL مقداری را بر نمی گردانند. برای اجرای اینگونه دستورات می توان از متد statement فاساد DB همانند زیر استفاده نمود : DB::statement(&#39;drop table users&#39;); گوش دادن به رخدادهای Query با متد Listen می توانید با بهره گیری از متد listen در façade DB، برای تمامی کوئری ها listener تعریف کنید. متد ذکر شده به شما کمک می کند از کوئری هاlog گرفته و آن ها را عیب یابی کنید. می توانید query listener را در یک service provider ثبت کنید: &lt;?php namespace App\\Providers; use Illuminate\\Support\\Facades\\DB; use Illuminate\\Support\\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Bootstrap any application services. * * @return void */ public function boot() { DB::listen(function ($query) { // $query-&gt;sql // $query-&gt;bindings // $query-&gt;time }); } /** * Register the service provider. * * @return void */ public function register() { // } } بررسی Database Transactions به منظور اجرای مجموعه ای از علملیات طی یک تراکنش بر روی پایگاه داده، Laravel متد transaction را ارائه می دهد. در صورتی که در طول اجرای تابع Closure متد transaction خطا رخ دهد، تراکنش به صورت خودکار به حالت قبلی برگردانده می شود (rollback). و اگر با موفقیت اجرا شد، تراکنش به صورت خودکار تایید ثبت (commit) می گردد. به هنگام استفاده از متد transaction لزومی ندارد نگران بازگرداندن یا تایید ثبت تراکنش به صورت دستی باشید: DB::transaction(function () { DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]); DB::table(&#39;posts&#39;)-&gt;delete(); }); نکته: هرنوع اثتثنائی که از درون Closure تعریف شده در متد transaction رخ بدهد ، باعث RollBack شدن transaction بصورت خودکار میشود . اداره کردن deadlock متد transaction یک آرگومان اختیاری دوم را می پذیرد که تعداد دفعاتی را که یک transaction باید در هنگام وقوع یک بن بست (deadlock) انجام شود، تعیین می کند. هنگامی که این تلاش ها به ثمر نرسید، یک استثنا رخ خواهد داد : DB::transaction(function () { DB::table(&#39;users&#39;)-&gt;update([&#39;votes&#39; =&gt; 1]); DB::table(&#39;posts&#39;)-&gt;delete(); }, 5); راه اندازی و اجرای Transactions به صورت دستی اگر می خواهید یک تراکنش را به صورت دستی اجرا کرده و کنترل کامل بر عملیات rollback (بازگشت تراکنش به حالت قبلی) و commit (تایید ثبت تراکنش)، می توانید متد begin Transaction را بر روی DB facade فراخوانی نمایید: DB::beginTransaction(); می توانید تراکنش را به وسیله ی متد rollback به حالت قبلی برگردانید (به عقب برگردانید): DB::rollBack(); در پایان می توانید تراکنش را به وسیله ی متد commit تایید ثبت نمایید: DB::commit(); متدهای مربوط به تراکنش façade DB همچنین در تراکنش های query builder و Eloquent ORM کاربرد دارد (می توان از آن ها برای کنترل تراکنش های query builder و Eloquent استفاده کرد).","headline":"پایگاه داده ها","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/documentation/laravel/Database/database"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/img/logo/blankspace-avatar.png"},"name":"Farhad Mirzapour"},"url":"http://localhost:4000/documentation/laravel/Database/database"}</script>
<!-- End Jekyll SEO tag -->

    <!-- stylesheets -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="stylesheet" href="/assets/prisma/prism.css">
    <!-- favicons and rss -->
    <link rel="alternate" type="application/rss+xml" title="مجموعه مقالات و مطالب آموزشی وب - گرداوری توسط فرهاد میرزاپور" href="/feed.xml">
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/img/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/assets/img/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<!-- header -->
<header class="header" role="banner" aria-label="Header">
    <button class="hamburger-button" onclick="hamburgerMenu();" role="button" aria-label="Hamburger menu button">
        <i class="fa fa-bars fa-2x" aria-hidden="true"></i>
    </button>
    <a href="/" class="logo" role="link" aria-label="Home">
        <img alt="مجموعه مقالات و مطالب آموزشی وب - گرداوری توسط فرهاد میرزاپور" src="/assets/img/logo/farhadmirzapour-logo.png" role="img" aria-label="Logo">
    </a>
    <nav class="navigation" role="navigation" aria-label="Navigation">
        <ul role="menu" aria-hidden="true" aria-label="Navigation menu">
            <li role="menuitem" aria-label="Navigation menu item">
                <a href="/" class="logo" role="menuitem" aria-label="Home">
                    <img alt="مجموعه مقالات و مطالب آموزشی وب - گرداوری توسط فرهاد میرزاپور" src="/assets/img/logo/farhadmirzapour-logo.png" role="img" aria-label="Logo">
                </a>
            </li>
            
            <li role="menuitem"><a href="/blog" role="menuitem" aria-label="مقالات">مقالات</a></li>
            
            <li role="menuitem"><a href="/contactus" role="menuitem" aria-label="تماس">تماس</a></li>
            
        </ul>
    </nav>
    <div class="searchbox" role="search" aria-label="Search">
        <form action="/search" id="searchthis" method="get" role="form" aria-label="Search form">
            <i class="fa fa-search" aria-hidden="true"></i>
            <input type="search" id="search" name="query" placeholder="Search..." role="textbox" aria-label="Search textbox">
        </form>
    </div>
</header>

<nav id="hamburger-menu" role="navigation" aria-label="Hamburger menu">
    <div class="searchbox" role="search" aria-label="Search">
        <form action="/search" id="searchthis" method="get" role="form" aria-label="Search form">
            <i class="fa fa-search" aria-hidden="true"></i>
            <input type="search" id="search" name="query" placeholder="Search..." role="textbox" aria-label="Search textbox">
        </form>
    </div>
    <div class="home-nav" role="navigation" aria-label="Site navigation">
        <a href="/" role="menuitem" aria-label="Home">صفحه اصلی</a>
        
        <a href="/blog" role="menuitem" aria-label="مقالات">مقالات</a>
        
        <a href="/contactus" role="menuitem" aria-label="تماس">تماس</a>
        
    </div>

    
    <div class="doc-nav" role="navigation" aria-label="Documentation navigation">
        <p role="presentation" aria-label="Category name">
            اصول آموزش Laravel
        </p>
        <ul role="menu" aria-hidden="true" aria-label="Navigation menu">
            <li role="menuitem" aria-label="Navigation menu item"><a href="/2017/12/18/laravel.html" class="doc-link" role="link" aria-label="پایگاه داده ها">مقدمه</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Digging-Deeper/collections" class="doc-link" role="link" aria-label="معرفی collections">معرفی collections</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Database/database" class="doc-link" role="link" aria-label="پایگاه داده ها">پایگاه داده ها</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Database/queries" class="doc-link" role="link" aria-label="آشنایی با Query Builder">آشنایی با Query Builder</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Eloquent-ORM/eloquent" class="doc-link" role="link" aria-label="آشنایی با eloquent">آشنایی با eloquent</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Eloquent-ORM/eloquent-relationships" class="doc-link" role="link" aria-label="eloquent relationships  آموزش">eloquent relationships  آموزش</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Eloquent-ORM/eloquent-mutators" class="doc-link" role="link" aria-label="آشنایی با eloquent mutators">آشنایی با eloquent mutators</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Eloquent-ORM/eloquent-collections" class="doc-link" role="link" aria-label="آشنایی با eloquent collections">آشنایی با eloquent collections</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Eloquent-ORM/eloquent-serialization" class="doc-link" role="link" aria-label="آشنایی با eloquent serialization">آشنایی با eloquent serialization</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Architecture-Concepts/lifecycle" class="doc-link" role="link" aria-label="چرخه ی حیات درخواست (Request Lifecycle)">چرخه ی حیات درخواست (Request Lifecycle)</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/routing" class="doc-link" role="link" aria-label="Routing یا مسیریابی در لاراول">Routing یا مسیریابی در لاراول</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/middleware" class="doc-link" role="link" aria-label="آموزش Middleware">آموزش Middleware</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/csrf" class="doc-link" role="link" aria-label="حفاظت CSRF">حفاظت CSRF</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/controllers" class="doc-link" role="link" aria-label="استفاده از Controller">استفاده از Controller</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/requests" class="doc-link" role="link" aria-label="اصول requests">اصول requests</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/views" class="doc-link" role="link" aria-label="ایجاد view">ایجاد view</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/session" class="doc-link" role="link" aria-label="استفاده از  Session">استفاده از  Session</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/responses" class="doc-link" role="link" aria-label="پاسخ Response">پاسخ Response</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/urls" class="doc-link" role="link" aria-label="تولید URL در لاراول">تولید URL در لاراول</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/validation" class="doc-link" role="link" aria-label="validation یا اعتبارسنجی در لاراول">validation یا اعتبارسنجی در لاراول</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/The-Basics/errors" class="doc-link" role="link" aria-label="مدیریت Errors &amp; Logging">مدیریت Errors &amp; Logging</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Frontend/blade" class="doc-link" role="link" aria-label="Blade Templates">Blade Templates</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Frontend/localization" class="doc-link" role="link" aria-label="اصول localization">اصول localization</a></li>
            
            
            
            <li role="menuitem" aria-label="Navigation menu item"><a href="/documentation/laravel/Frontend/frontend" class="doc-link" role="link" aria-label="JavaScript &amp; CSS Scaffolding">JavaScript &amp; CSS Scaffolding</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        </ul>
    </div>
    
</nav>
<!-- main content -->
<main class="container" role="main">
    <div class="rcdoccontainerimg">
<div class="rc-DRTVBanner-new rc-DRTVBanner-bigsize">
    <div style="background: url('/images/original/laravel.png'); " class="blurred_img"></div>
    <div class="mask"></div>
    <div class="bot"></div>
    <div class="over">
        <div class="container-rc">
            <img class="image" src="/images/original/laravel.png" alt="پایگاه داده ها" height="190">
            <div class="desktop-banner-container">
                <h1 class="display-5-text headline">
                    
                    
                    اصول آموزش Laravel
                    </h1>
                <!--<div class="tagslist"><ul class='lyda-tag-list'><li class='lyda-tag-list-title'>برچسب ها</li><li><a class="tags" href="/tag/لاراول">#لاراول</a></li><li><a class="tags" href="/tag/لاراول-5-5">#لاراول 5.5</a></li></ul></div>-->
            </div>
        </div>
    </div>
</div>

<!--<div class="bread-crumb">-->
<!--<div class="container   ">-->
<!--<div class="pull-right ">-->
<!--<div class="bread-button text-custom b-left">-->
<!--انتشار : 2 ماه پیش-->
<!--</div>-->
<!--<a href="/category/article/" class="bread-button back-to-all b-left hidden-xs">همه مقالات</a>-->
<!--<div class="cat-lable">-->
<!--<a href="/category/article/laravel/">-->
<!--لاراول-->
<!--</a>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->
<script>
    $(window).scroll(function(){
        var sticky = $('.doc-menu'),
            scroll = $(window).scrollTop();
        if (scroll >= 101) {sticky.addClass('doc-header-scroll'); }
        else {sticky.removeClass('doc-header-scroll'); };
    });
</script>
</div>
<div class="doc-container">

    <div class="doc-menu">
    
    <ul>
        <li>
            <a href="/2017/12/18/laravel.html" class="active doc-link" role="link">
                مقدمه
            </a>
        </li>
        
        <li>
            <span class="caret">معماری Laravel</span>
            <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li>
            <a title="چرخه ی حیات درخواست (Request Lifecycle)" href="/documentation/laravel/Architecture-Concepts/lifecycle" class="active doc-link" role="link">
                چرخه ی حیات درخواست (Request Lifecycle)
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            </ul>
        </li>
        
        <li>
            <span class="caret">مفاهیم اساسی</span>
            <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li>
            <a title="Routing یا مسیریابی در لاراول" href="/documentation/laravel/The-Basics/routing" class="active doc-link" role="link">
                Routing یا مسیریابی در لاراول
            </a>
        </li>
        
        
        
        <li>
            <a title="آموزش Middleware" href="/documentation/laravel/The-Basics/middleware" class="active doc-link" role="link">
                آموزش Middleware
            </a>
        </li>
        
        
        
        <li>
            <a title="حفاظت CSRF" href="/documentation/laravel/The-Basics/csrf" class="active doc-link" role="link">
                حفاظت CSRF
            </a>
        </li>
        
        
        
        <li>
            <a title="استفاده از Controller" href="/documentation/laravel/The-Basics/controllers" class="active doc-link" role="link">
                استفاده از Controller
            </a>
        </li>
        
        
        
        <li>
            <a title="اصول requests" href="/documentation/laravel/The-Basics/requests" class="active doc-link" role="link">
                اصول requests
            </a>
        </li>
        
        
        
        <li>
            <a title="ایجاد view" href="/documentation/laravel/The-Basics/views" class="active doc-link" role="link">
                ایجاد view
            </a>
        </li>
        
        
        
        <li>
            <a title="استفاده از  Session" href="/documentation/laravel/The-Basics/session" class="active doc-link" role="link">
                استفاده از  Session
            </a>
        </li>
        
        
        
        <li>
            <a title="پاسخ Response" href="/documentation/laravel/The-Basics/responses" class="active doc-link" role="link">
                پاسخ Response
            </a>
        </li>
        
        
        
        <li>
            <a title="تولید URL در لاراول" href="/documentation/laravel/The-Basics/urls" class="active doc-link" role="link">
                تولید URL در لاراول
            </a>
        </li>
        
        
        
        <li>
            <a title="validation یا اعتبارسنجی در لاراول" href="/documentation/laravel/The-Basics/validation" class="active doc-link" role="link">
                validation یا اعتبارسنجی در لاراول
            </a>
        </li>
        
        
        
        <li>
            <a title="مدیریت Errors &amp; Logging" href="/documentation/laravel/The-Basics/errors" class="active doc-link" role="link">
                مدیریت Errors &amp; Logging
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            </ul>
        </li>
        
        <li>
            <span class="caret">Front End</span>
            <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li>
            <a title="Blade Templates" href="/documentation/laravel/Frontend/blade" class="active doc-link" role="link">
                Blade Templates
            </a>
        </li>
        
        
        
        <li>
            <a title="اصول localization" href="/documentation/laravel/Frontend/localization" class="active doc-link" role="link">
                اصول localization
            </a>
        </li>
        
        
        
        <li>
            <a title="JavaScript &amp; CSS Scaffolding" href="/documentation/laravel/Frontend/frontend" class="active doc-link" role="link">
                JavaScript &amp; CSS Scaffolding
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            </ul>
        </li>
        
        <li>
            <span class="caret">مفاهیم پیشرفته تر</span>
            <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li>
            <a title="معرفی collections" href="/documentation/laravel/Digging-Deeper/collections" class="active doc-link" role="link">
                معرفی collections
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            </ul>
        </li>
        
        <li>
            <span class="caret">پایگاه داده ها</span>
            <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li>
            <a title="پایگاه داده ها" href="/documentation/laravel/Database/database" class="active doc-link" role="link">
                پایگاه داده ها
            </a>
        </li>
        
        
        
        <li>
            <a title="آشنایی با Query Builder" href="/documentation/laravel/Database/queries" class="active doc-link" role="link">
                آشنایی با Query Builder
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            </ul>
        </li>
        
        <li>
            <span class="caret">Eloquent ORM</span>
            <ul>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li>
            <a title="آشنایی با eloquent" href="/documentation/laravel/Eloquent-ORM/eloquent" class="active doc-link" role="link">
                آشنایی با eloquent
            </a>
        </li>
        
        
        
        <li>
            <a title="eloquent relationships  آموزش" href="/documentation/laravel/Eloquent-ORM/eloquent-relationships" class="active doc-link" role="link">
                eloquent relationships  آموزش
            </a>
        </li>
        
        
        
        <li>
            <a title="آشنایی با eloquent mutators" href="/documentation/laravel/Eloquent-ORM/eloquent-mutators" class="active doc-link" role="link">
                آشنایی با eloquent mutators
            </a>
        </li>
        
        
        
        <li>
            <a title="آشنایی با eloquent collections" href="/documentation/laravel/Eloquent-ORM/eloquent-collections" class="active doc-link" role="link">
                آشنایی با eloquent collections
            </a>
        </li>
        
        
        
        <li>
            <a title="آشنایی با eloquent serialization" href="/documentation/laravel/Eloquent-ORM/eloquent-serialization" class="active doc-link" role="link">
                آشنایی با eloquent serialization
            </a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
            </ul>
        </li>
        
    </ul>
    
</div>

    <article class="documentation">
        <header class="doc-header">
            <div class="time">
                    تاریخ :      دوشنبه 4 دی 1396
            </div>
                
        </header>
        <section class="anchored">
            <p>
لاراول ارتباط با پایگاه داده ها را با استفاده از raw SQL, the fluent query builder و  the Eloquent ORM  بسیار ساده ساخته است. در حال حاضر، Laravel از چهار پایگاه داده پشتیبانی می کند:
</p>

<div class="content-list">
<ul>
<li>MySQL</li>
<li>PostgreSQL</li>
<li>SQLite</li>
<li>SQL Server</li>
</ul>
</div>

<p><br></p>
<h3>تنظیمات (Configuration)</h3>
<p>
پیکربندی پایگاه داده برای برنامه شما در <code class=" language-php">config/database.php</code> قرار دارد. در این فایل شما می توانید تمام اتصالات پایگاه داده خود را تعریف کنید.
</p>

<p><br></p>
<h3> تنظیمات Read &amp; Write Connections </h3>
<p>
گاهی اوقات شما ممکن است مایل به استفاده از یک کانکشن پایگاه داده برای دستورات SELECT، و کانکشن دیگر برای INSERT، UPDATE و DELETE statements. لاراول این امکان را ایجاد می کند تا کانکشن های مناسب مورد استفاده قرار می گیرد.
</p>

<pre><code class="language-php  line-numbers">'mysql' =&gt; [
    'read' =&gt; [
        'host' =&gt; '192.168.1.1',
    ],
    'write' =&gt; [
        'host' =&gt; '196.168.1.2'
    ],
    'sticky'    =&gt; true,
    'driver'    =&gt; 'mysql',
    'database'  =&gt; 'database',
    'username'  =&gt; 'root',
    'password'  =&gt; '',
    'charset' =&gt; 'utf8mb4',
    'collation' =&gt; 'utf8mb4_unicode_ci',
    'prefix'    =&gt; '',
],
</code></pre>

<p>
گزینه sticky  یک مقدار اختیاری است  تا عملیات خواندن فوری از دیتابیس  در زمانیکه عملیات نوشتن اطلاعات در دیتابیس در حال انجام است  صورت گیرد  و تضمین می کند که هر گونه اطلاعاتی که در طول چرخه درخواست نوشته شده است، بتواند بلافاصله پس از همان درخواست از پایگاه داده خوانده شود.
</p>

<p><br></p>
<h3>استفاده همزمان از چندین connection در پروژه</h3>
<p>
هنگامی که چندین connection (برای انجام عملیات مختلف) در پروژه خود تعریف شده دارید، می توانید از طریق متد connection در façade DB به هر یک از connection ها دسترسی داشته باشید. name ای که به متد connection ارسال می کنید باید با یکی از connection های لیست شده در فایل تنظیمات config/database.php منطبق باشد:
</p>

<pre><code class="language-php  line-numbers">$users = DB::connection('foo')-&gt;select(...);
</code></pre>

<p>
همچنین می توانید به نمونه ی شی PDO خالص و زیرساختی دسترسی داشته باشید. برای این منظور کافی است متد getPdo را بر روی نمونه ای ازconnection صدا بزنید:
</p>

<pre><code class="language-php  line-numbers">$pdo = DB::connection()-&gt;getPdo();
</code></pre>

<p><br></p>
<h3><a href="#running-queries">اجرای  Raw SQL Queries</a></h3>
<p>
هنگامی که اتصال پایگاه داده خود را پیکربندی کرده اید، می توانید با استفاده از فاساد DB کوئری ها را اجرا کنید.
</p>

<pre><code class="language-php  line-numbers">&lt;?php

namespace App\Http\Controllers;

use Illuminate\Support\Facades\DB;
use App\Http\Controllers\Controller;

class UserController extends Controller
{
    /**
     * Show a list of all of the application's users.
     *
     * @return Response
     */
    public function index()
    {
        $users = DB::select('select * from users where active = ?', [1]);

        return view('user.index', ['users' =&gt; $users]);
    }
}
</code></pre>

<p>
اولین آرگومان دستورات SQL و دومین آرگومان مقادیری است که بصورت binding جهت جلوگیری از حملات SQL injection مورد استفاده قرار می گیرد.
</p>

<p>
دستور SELECT آرایه ای از نتایج را بر می گرداند و هر نتیجه شی از کلاس PHP StdClass خواهد بود که به شما امکان می دهد به مقادیر نتایج دسترسی داشته باشید:
</p>

<pre><code class="language-php  line-numbers">foreach ($users as $user) {
    echo $user-&gt;name;
}
</code></pre>

<p><br></p>
<h3>استفاده از Named Bindings</h3>

<p>
بجای استفاده از ؟ برای نشان دادن پارامترهای bindings،  می توانید  از نامگذاری پارامترها استفاده کنید:
</p>

<pre><code class="language-php  line-numbers">$results = DB::select('select * from users where id = :id', ['id' =&gt; 1]);
</code></pre>

<p><br></p>
<h3>اجرای دستور Insert</h3>
<p>
کد زیر نحوه اجرای دستور INSERT را نمایش می دهد :
</p>

<pre><code class="language-php  line-numbers">DB::insert('insert into users (id, name) values (?, ?)', [1, 'Dayle']);
</code></pre>

<p><br></p>
<h3>اجرای دستور Update</h3>
<p>
کد زیر نحوه اجرای دستور UPDATE را نمایش می دهد که تعداد رکوردهای تغییر داده شده را بر می گرداند :
</p>
<pre><code class="language-php  line-numbers">$affected = DB::update('update users set votes = 100 where name = ?', ['John']);
</code></pre>

<p><br></p>
<h3>اجرای دستور Delete</h3>
<p>
کد زیر نحوه اجرای دستور DELETE را نمایش می دهد که تعداد رکوردهای حذف شده را بر می گرداند :
</p>

<pre><code class="language-php  line-numbers">$deleted = DB::delete('delete from users');
</code></pre>

<p><br></p>
<h3>اجرای سایر دستورات SQL</h3>
<p>
تعدادی از دستورات SQL مقداری را بر نمی گردانند. برای اجرای اینگونه دستورات می توان از متد statement  فاساد DB  همانند زیر استفاده نمود :
</p>

<pre><code class="language-php  line-numbers">DB::statement('drop table users');
</code></pre>

<p><br></p>
<h3>گوش دادن به رخدادهای Query با متد Listen</h3>
<p>
می توانید با بهره گیری از متد listen در façade DB، برای تمامی کوئری ها listener تعریف کنید. متد ذکر شده به شما کمک می کند از کوئری هاlog گرفته و آن ها را عیب یابی کنید. می توانید query listener را در یک service provider ثبت کنید:
</p>

<pre><code class="language-php  line-numbers">&lt;?php

namespace App\Providers;

use Illuminate\Support\Facades\DB;
use Illuminate\Support\ServiceProvider;

class AppServiceProvider extends ServiceProvider
{
    /**
     * Bootstrap any application services.
     *
     * @return void
     */
    public function boot()
    {
        DB::listen(function ($query) {
            // $query-&gt;sql
            // $query-&gt;bindings
            // $query-&gt;time
        });
    }

    /**
     * Register the service provider.
     *
     * @return void
     */
    public function register()
    {
        //
    }
}
</code></pre>

<p><br></p>
<h3><a href="#database-transactions">بررسی Database Transactions</a></h3>
<p>
به منظور اجرای مجموعه ای از علملیات طی یک تراکنش بر روی پایگاه داده، Laravel متد transaction را ارائه می دهد. در صورتی که در طول اجرای تابع Closure متد transaction خطا رخ دهد، تراکنش به صورت خودکار به حالت قبلی برگردانده می شود (rollback). و اگر با موفقیت اجرا شد، تراکنش به صورت خودکار تایید ثبت (commit) می گردد.
</p>
<p>
به هنگام استفاده از متد transaction لزومی ندارد نگران بازگرداندن یا تایید ثبت تراکنش به صورت دستی باشید:
</p>

<pre><code class="language-php  line-numbers">DB::transaction(function () {
    DB::table('users')-&gt;update(['votes' =&gt; 1]);

    DB::table('posts')-&gt;delete();
});
</code></pre>
<p>
نکته: هرنوع اثتثنائی که از درون Closure تعریف شده در متد  transaction رخ بدهد ، باعث RollBack شدن transaction بصورت خودکار میشود .
</p>

<p><br></p>
<h3>اداره کردن  deadlock </h3>
<p>
متد transaction  یک آرگومان اختیاری دوم را می پذیرد که تعداد دفعاتی را که یک transaction  باید در هنگام وقوع یک بن بست (deadlock) انجام شود، تعیین می کند. هنگامی که این تلاش ها به ثمر نرسید، یک استثنا رخ خواهد داد :
</p>

<pre><code class="language-php  line-numbers">DB::transaction(function () {
    DB::table('users')-&gt;update(['votes' =&gt; 1]);

    DB::table('posts')-&gt;delete();
}, 5);
</code></pre>

<p><br></p>
<h3>راه اندازی و اجرای Transactions  به صورت دستی </h3>
<p>
اگر می خواهید یک تراکنش را به صورت دستی اجرا کرده و کنترل کامل بر عملیات rollback (بازگشت تراکنش به حالت قبلی) و commit (تایید ثبت تراکنش)، می توانید متد begin Transaction را بر روی DB facade فراخوانی نمایید:
</p>

<pre><code class="language-php  line-numbers">DB::beginTransaction();
</code></pre>

<p>
می توانید تراکنش را به وسیله ی متد rollback به حالت قبلی برگردانید (به عقب برگردانید):
</p>

<pre><code class="language-php  line-numbers">DB::rollBack();
</code></pre>

<p>
در پایان می توانید تراکنش را به وسیله ی متد commit تایید ثبت نمایید:
</p>

<pre><code class="language-php  line-numbers">DB::commit();
</code></pre>

<blockquote>
متدهای مربوط به تراکنش façade DB همچنین در تراکنش های query builder و Eloquent ORM کاربرد دارد (می توان از آن ها برای کنترل تراکنش های query builder و Eloquent استفاده کرد).
</blockquote>

        </section>
        
<hr>
<p>
</p>
<div>منابع مورد مطالعه جهت جمع آوری این مطلب:</div>
<div class="refrencehref">
        https://laravel.com/docs/5.5/collections
</div>


        <hr>
        <style>
    #commentsdiv{
        background-color: #f5f5f5;
        border: 1px solid #c5c5c5;
        border-bottom: 0px !important;
        padding: 12px;
    }
    #commentsborder{
        background-color: #fff;
        border: 1px solid #c5c5c5;
        white-space: normal;
        padding: 20px;
    }
</style>

<div id="commentsdiv">نظرات</div>
<div id="commentsborder">
<div id="wpac-comment"></div>
</div>
<script type="text/javascript">
wpac_init = window.wpac_init || [];
wpac_init.push({widget: 'Comment', id: 7878});
(function() {
    if ('WIDGETPACK_LOADED' in window) return;
    WIDGETPACK_LOADED = true;
    var mc = document.createElement('script');
    mc.type = 'text/javascript';
    mc.async = true;
    mc.src = 'https://embed.widgetpack.com/widget.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
})();
</script>

    </article>
</div>
<script src="/assets/js/anchor.min.js"></script>
<script>
    anchors.options = {
        placement: 'left',
        visible: 'always',
//        icon: '#',
    };
    anchors.add('.anchored h2,.anchored h3,.anchored h4,.anchored h5,.anchored h6');

    (function($){
        if(window.location.hash) {
            var hash = decodeURIComponent(window.location.hash);
            gotohash($(hash).offset().top);
        }
        $('a.anchorjs-link').click(function(){
			gotohash($(this).offset().top);
        });
        $('a.anchorjs').click(function(){
			var id = '#' + $(this).attr('title');
			gotohash($(id).offset().top);
        });		
        function gotohash(top){
            var headerHeight = 70; // Get fixed header height
            $('html,body').animate({
                scrollTop: top - headerHeight
            }, 20);
        }
    })(jQuery);
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
   $(document).ready(function (){

     var scrollPosition = getParameterByName('scroll');
     if(scrollPosition)
      $(".doc-menu").scrollTop(scrollPosition);

     $('.doc-link').click(function(){
        var scrollTop = $(".doc-menu").scrollTop();
        if(scrollTop > 0)
          $(this).attr("href",this.href + "?scroll=" + $(".doc-menu").scrollTop());
     });

     function getParameterByName(name, url) {
        if (!url) {
          url = window.location.href;
        }
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

   });
</script>
    <div id="back-to-top" role="button" aria-label="Back to top">
        <i class="fa fa-angle-double-up" aria-hidden="true"></i>
    </div>
</main>
<!-- footer -->

<footer class="footer" role="contentinfo" aria-label="Site footer">
    <div class="navigation" role="navigation" aria-label="Footer links">
        <a href="http://localhost:4000" class="avatar" role="link"></a>
        <ul role="menubar" aria-label="Footer links menubar">
            <li class="footer-products" role="menuitem" aria-label="Products">
                تولیدات
                <ul role="menu" aria-hidden="true" aria-label="Products link">
                </ul>
            </li>
            <li class="footer-blog" role="menuitem" aria-label="Blog">
                مقالات
                <ul role="menu" aria-hidden="true" aria-label="Blog link">
                    
                    <li role="listitem" aria-label="Blog link item"><a href="/2020/07/03/marriage.html" role="link" aria-label="ازدواج">ازدواج</a></li>
                    
                    <li role="listitem" aria-label="Blog link item"><a href="/2019/10/11/vuejs.html" role="link" aria-label="آموزش vuejs">آموزش vuejs</a></li>
                    
                    <li role="listitem" aria-label="Blog link item"><a href="/2017/12/18/laravel.html" role="link" aria-label="آموزش Laravel">آموزش Laravel</a></li>
                    
                    <li role="listitem" aria-label="Blog link item"><a href="/articles/2017/12/13/laravelcollective.html" role="link" aria-label="معرفی Laravel Collective">معرفی Laravel Collective</a></li>
                    
                    <li role="listitem" aria-label="Blog link item"><a href="/2017/12/06/design-patterns.html" role="link" aria-label="معرفی  Design Pattern">معرفی  Design Pattern</a></li>
                    
                    <li role="listitem" aria-label="Blog link item"><a href="/blog" role="link" aria-label="Read more">Read More</a></li>
                </ul>
            </li>

            <li class="footer-connect" role="menuitem" aria-label="Connect">
                تماس
                <ul role="menu" aria-hidden="true" aria-label="Connect link">
                    <li role="listitem" aria-label="Connect link item"><a href="https://github.com/farhadmirzapour" target="_blank" role="link" aria-label="GitHub">GitHub</a></li>
                    <li role="listitem" aria-label="Connect link item"><a href="https://www.linkedin.com/in/farhad-mirzapour/" target="_blank" role="link" aria-label="Linkedin">Linkedin</a></li>
                    <li role="listitem" aria-label="Connect link item"><a href="https://twitter.com/farhadmirzapour" target="_blank" role="link" aria-label="Twitter">Twitter</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="socials" role="navigation" aria-label="Social links">
        <ul role="menu" aria-hidden="true" aria-label="Social link">
            <li role="listitem" aria-label="Social link item"><a href="https://github.com/farhadmirzapour" target="_blank" role="link" aria-label="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a></li>
            <li role="listitem" aria-label="Social link item"><a href="https://twitter.com/farhadmirzapour" target="_blank" role="link" aria-label="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
            <li role="listitem" aria-label="Social link item"><a href="https://www.linkedin.com/in/farhad-mirzapour-0043b862/" target="_blank" role="link" aria-label="Linkedin"><i class="fa fa-linkedin-square" aria-hidden="true"></i></a></li>
            <li role="listitem" aria-label="Social link item"><a href="/feed.xml" role="link" aria-label="RSS"><i class="fa fa-rss-square" aria-hidden="true"></i></a></li>
        </ul>
    </div>
    <div class="copyright" role="contentinfo" aria-label="Copyright">
        <p>© <script type="text/javascript">document.write(new Date().getFullYear());</script> Farhad Mirzapour</p>
    </div>
</footer>

<!-- scripts -->
<script src="/assets/js/hamburger-menu.js"></script>

<script src="/assets/js/elevator.min.js"></script>
<script src="/assets/js/back-to-top.js"></script>
<script src="/assets/prisma/prism.js"></script>
<!-- google analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-108878564-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-108878564-1');
</script>

</body>
</html>